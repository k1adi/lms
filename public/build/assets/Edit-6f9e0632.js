import{W as D,j as e}from"./app-72aaa421.js";import{S as j}from"./react-select.esm-aa822d5a.js";import{D as M}from"./DashboardLayout-1db68d21.js";import{B as Q}from"./Breadcrumb-d38887d1.js";import{F as d}from"./FieldGroup-b00c69af.js";import{T as x}from"./TextInput-e34af910.js";import{I as B}from"./InputError-b058629a.js";import{P as f}from"./PrimaryButton-3b2e16c9.js";import{c as E}from"./ReactSelectOption-49a86ad9.js";import{C as A}from"./CapitalizeWord-ef06e675.js";import{P as F}from"./plus-7368c087.js";import{T as R}from"./trash-2-fd2e98e6.js";import"./graduation-cap-c57be5ac.js";const W=({assignment:i,courses:y})=>{const v=[{link:route("dashboard"),text:"Dashboard"},{link:route("tests.index"),text:"Test"}],{course_id:w,course:h,access_time:z,minimum_score:g,type:c,questions:N}=i,{data:r,setData:a,patch:C,errors:l,processing:b}=D({course_id:w,selectCourse:{value:h.id,label:h.name},minimum_score:g,type:c,selectType:{value:c,label:A(c)},questions:c=="knowledge"?N.map(t=>({id:t.id,text:t.text,answers:t.answers.map(s=>({id:s.id,text:s.text,is_correct:!!Number(s.is_correct)}))})):[]}),k=t=>{a(s=>({...s,course_id:t.value,selectCourse:t}))},_=t=>{a(s=>({...s,type:t.value,selectType:t}))},S=t=>{const s=Math.max(0,Math.min(100,parseInt(t.target.value)));a("minimum_score",isNaN(s)?"":s)},T=()=>{a("questions",[...r.questions,{text:"",answers:[{text:"",is_correct:""}]}])},q=t=>{const s=r.questions.filter((p,o)=>o!==t);a("questions",s)},$=t=>{t.preventDefault(),C(route("tests.update",i))};return e.jsxs("form",{onSubmit:$,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx(Q,{pageName:"Create Test",prevPage:v}),e.jsx(d,{label:"Course",name:"selectCourse",error:l.course,isPrimary:!0,children:e.jsx(j,{name:"selectCourse",placeholder:"Select Course...",options:E(y),value:r.selectCourse,onChange:k,className:"mt-1 block w-full",required:!0})}),e.jsx(d,{label:"Course Type",name:"type",error:l.type,isPrimary:!0,children:e.jsx(j,{name:"type",placeholder:"Select Type...",options:[{value:"knowledge",label:"Knowledge"},{value:"skill",label:"Skill"}],value:r.selectType,onChange:_,className:"mt-1 block w-full",required:!0})}),r.type=="knowledge"&&e.jsx(e.Fragment,{children:e.jsx(d,{label:"Minimum Score",name:"minimumScore",error:l.minimum_score,isPrimary:!0,children:e.jsx(x,{name:"minimumScore",type:"number",min:"0",max:"100",value:r.minimum_score,onChange:S,className:"mt-1 block w-full",placeholder:"Minimum score (0-100)...",required:!0})})}),r.type!=="knowledge"&&e.jsx(f,{disabled:b,children:"Submit"})]}),r.type=="knowledge"&&e.jsx("div",{className:"content-box mt-2",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text--sub-heading",children:"Question"}),e.jsx("button",{className:"btn btn--primary",type:"button",onClick:T,children:e.jsx(F,{})})]})}),r.type=="knowledge"&&r.questions.map((t,s)=>e.jsxs("div",{className:"content-box mt-2",children:[e.jsx(d,{label:`Question no. ${s+1}`,name:`questions.${s}.text`,error:l[`questions.${s}.text`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(x,{name:`questions.${s}.text`,className:"flex-1 mt-1",value:t.text,onChange:p=>{const o=[...r.questions];o[s].text=p.target.value,a("questions",o)},placeholder:"Question Text..."}),e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>q(s),children:e.jsx(R,{})})]})}),[...Array(3)].map((p,o)=>{const m=t.answers[o]||{text:"",is_correct:!1};return e.jsxs("div",{className:"flex flex-row items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",name:`questions.${s}.answers.${o}.isCorrect`,checked:m.is_correct,value:m.is_correct,onChange:()=>{const n=[...r.questions];n[s].answers=n[s].answers.map((u,P)=>({...u,is_correct:P===o})),a("questions",n)}}),e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{name:`questions.${s}.answers.${o}.text`,className:"w-full",value:m.text,onChange:n=>{const u=[...r.questions];u[s].answers[o]={...m,text:n.target.value},a("questions",u)},placeholder:"Answer Text..."}),e.jsx(B,{message:l[`questions.${s}.answers.${o}.name`],className:"mt-2"})]})]},o)})]},s)),r.type=="knowledge"&&e.jsx("div",{className:"content-box mt-2 text-center",children:e.jsx(f,{className:"w-full justify-center",disabled:b,children:"Submit"})})]})};W.layout=i=>e.jsx(M,{title:"Tes Edit",children:i});export{W as default};
