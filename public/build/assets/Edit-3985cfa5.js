import{W as D,j as e}from"./app-e6c10f9f.js";import{S as A}from"./react-select.esm-f2e96009.js";import{D as E}from"./DashboardLayout-d6f26606.js";import{B as R}from"./Breadcrumb-a61acd4e.js";import{F as i}from"./FieldGroup-a62580c7.js";import{T as m}from"./TextInput-305ab753.js";import{I as d}from"./InputError-0e950f47.js";import{T as q}from"./TextArea-ef62fbc8.js";import{P as B}from"./PrimaryButton-6f268c24.js";import{C as F}from"./CapitalizeWord-ef06e675.js";import{P as b}from"./plus-303411d6.js";import{T as x}from"./trash-2-305f6eaf.js";import"./graduation-cap-40745544.js";const L=({course:p})=>{const j=[{link:route("dashboard"),text:"Dashboard"},{link:route("courses.index"),text:"Courses"}],{name:f,type:h,trainer:v,thumbnail:N,url_attachment:g,description:y,sections:C}=p,{data:a,setData:l,patch:w,errors:r,processing:S}=D({name:f,type:{value:h,label:F(h)},trainer:v,thumbnail:N,url_attachment:g,description:y,sections:h=="online"?C.map(t=>({id:t.id,name:t.name,subsections:t.sub_section.map(s=>({id:s.id,section_id:s.section_id,name:s.name,url:s.url}))})):[]}),k=()=>{l("sections",[...a.sections,{name:"",subsections:[{name:"",url:""}]}])},_=t=>{const s=a.sections.filter((o,n)=>n!==t);l("sections",s)},$=t=>{const s=[...a.sections];s[t].subsections.push({name:"",url:""}),l("sections",s)},T=(t,s)=>{const o=[...a.sections];o[t].subsections=o[t].subsections.filter((n,c)=>c!==s),l("sections",o)},P=t=>{t.preventDefault(),w(route("courses.update",p))};return e.jsxs("form",{onSubmit:P,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx(R,{pageName:"Edit Course",prevPage:j}),e.jsx(i,{label:"Course Name",name:"name",error:r.name,isPrimary:!0,children:e.jsx(m,{name:"name",className:"mt-1 block w-full",value:a.name,onChange:t=>l("name",t.target.value),required:!0,isFocused:!0,autoComplete:"name",placeholder:"Name..."})}),e.jsx(i,{label:"Course Type",name:"type",error:r.type,isPrimary:!0,children:e.jsx(A,{name:"type",placeholder:"Select Type...",options:[{value:"offline",label:"Offline"},{value:"online",label:"Online"}],value:a.type,onChange:t=>l("type",t),className:"mt-1 block w-full",required:!0})}),e.jsx(i,{label:"Trainer Name",name:"trainer",error:r.trainer,isPrimary:!0,children:e.jsx(m,{name:"trainer",className:"mt-1 block w-full",value:a.trainer,required:!0,onChange:t=>l("trainer",t.target.value),autoComplete:"trainer",placeholder:"Trainer..."})}),e.jsx(i,{label:"Course Intro",name:"thumbnail",error:r.thumbnail,children:e.jsx(m,{type:"url",name:"thumbnail",className:"mt-1 block w-full",value:a.thumbnail,onChange:t=>l("thumbnail",t.target.value),autoComplete:"thumbnail",placeholder:"URL Video..."})}),e.jsx(i,{label:"Attachment",name:"url_attachment",error:r.url_attachment,children:e.jsx(m,{type:"url",name:"url_atachment",className:"mt-1 block w-full",value:a.url_atachment,onChange:t=>l("url_atachment",t.target.value),autoComplete:"url_atachment",placeholder:"URL Attachment..."})}),e.jsx(i,{label:"Description",name:"description",error:r.description,children:e.jsx(q,{id:"description",className:"mt-1 block w-full",value:a.description,onChange:t=>l("description",t.target.value),autoComplete:"description",placeholder:"Description",rows:3})})]}),a.type.value=="online"&&e.jsx("div",{className:"content-box mt-2",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text--sub-heading",children:"Section"}),e.jsx("button",{className:"btn btn--primary",type:"button",onClick:k,children:e.jsx(b,{})})]})}),a.type.value=="online"&&a.sections.map((t,s)=>e.jsxs("div",{className:"content-box mt-2",children:[e.jsx(i,{label:"Section Name",name:`sections.${s}.name`,error:r[`sections.${s}.name`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(m,{name:`sections.${s}.name`,className:"flex-1 mt-1",value:t.name,onChange:o=>{const n=[...a.sections];n[s].name=o.target.value,l("sections",n)},placeholder:"Section Name..."}),e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>_(s),children:e.jsx(x,{})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between mt-5 mb-3",children:[e.jsx("h2",{className:"text--sub-heading",children:"Sub Section"}),e.jsx("button",{className:"btn-sm btn--primary",type:"button",onClick:()=>$(s),children:e.jsx(b,{size:18})})]}),t.subsections.map((o,n)=>e.jsxs("div",{className:"flex flex-row items-start gap-2 mt-2",children:[e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>T(s,n),children:e.jsx(x,{})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(m,{name:`sections.${s}.subsections.${n}.name`,className:"w-full",value:o.name,onChange:c=>{const u=[...a.sections];u[s].subsections[n].name=c.target.value,l("sections",u)},placeholder:"Name..."}),e.jsx(d,{message:r[`sections.${s}.subsections.${n}.name`],className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(m,{name:`sections.${s}.subsections.${n}.url`,className:"w-full",value:o.url,onChange:c=>{const u=[...a.sections];u[s].subsections[n].url=c.target.value,l("sections",u)},placeholder:"url..."}),e.jsx(d,{message:r[`sections.${s}.subsections.${n}.url`],className:"mt-2"})]})]},n))]},s)),e.jsx("div",{className:"content-box mt-2 text-center",children:e.jsx(B,{className:"w-full justify-center",disabled:S,children:"Submit"})})]})};L.layout=p=>e.jsx(E,{title:"Course Edit",children:p});export{L as default};
