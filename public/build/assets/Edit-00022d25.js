import{W as _,j as e}from"./app-70c76b70.js";import{S as d,c as q}from"./ReactSelectOption-25688e42.js";import{D as k}from"./DashboardLayout-7352f75d.js";import{B as $}from"./Breadcrumb-0553f53b.js";import{F as m}from"./FieldGroup-81437039.js";import{T as c}from"./TextInput-0faa155a.js";import{I as b}from"./InputError-886bc580.js";import{T}from"./TextArea-cf599179.js";import{P}from"./PrimaryButton-4491d755.js";import{P as x}from"./plus-81e980c8.js";import{T as j}from"./trash-2-b9e77d1c.js";import"./graduation-cap-6d67c87b.js";const D=({course:n,courses:h})=>{console.log(n),console.log(h);const f=[{link:route("dashboard"),text:"Dashboard"},{link:route("courses.index"),text:"Courses"}],{data:s,setData:l,patch:v,errors:i,processing:N}=_({name:n.name,type:{value:n.type,label:n.type.charAt(0).toUpperCase()+n.type.slice(1)},trainer:n.trainer,thumbnail:n.thumbnail,url_attachment:n.url_attachment,prerequisite:n.prerequisite?{value:n.prerequisite_course.id,label:n.prerequisite_course.name}:{},description:n.description,sections:n.type=="online"?n.sections.map(t=>({id:t.id,name:t.name,subsections:t.sub_section.map(a=>({id:a.id,section_id:a.section_id,name:a.name,url:a.url}))})):[]});console.log(s);const g=()=>{l("sections",[...s.sections,{name:"",subsections:[{name:"",url:""}]}])},y=t=>{const a=s.sections.filter((o,r)=>r!==t);l("sections",a)},C=t=>{const a=[...s.sections];a[t].subsections.push({name:"",url:""}),l("sections",a)},w=(t,a)=>{const o=[...s.sections];o[t].subsections=o[t].subsections.filter((r,u)=>u!==a),l("sections",o)},S=t=>{t.preventDefault(),v(route("courses.update",n))};return e.jsxs("form",{onSubmit:S,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx($,{pageName:"Edit Course",prevPage:f}),e.jsx(m,{label:"Course Name",name:"name",error:i.name,isPrimary:!0,children:e.jsx(c,{name:"name",className:"mt-1 block w-full",value:s.name,onChange:t=>l("name",t.target.value),required:!0,isFocused:!0,autoComplete:"name",placeholder:"Name..."})}),e.jsx(m,{label:"Course Type",name:"type",error:i.type,isPrimary:!0,children:e.jsx(d,{name:"type",placeholder:"Select Type...",options:[{value:"offline",label:"Offline"},{value:"online",label:"Online"}],value:s.type,onChange:t=>l("type",t),className:"mt-1 block w-full",required:!0})}),e.jsx(m,{label:"Trainer Name",name:"trainer",error:i.trainer,isPrimary:!0,children:e.jsx(c,{name:"trainer",className:"mt-1 block w-full",value:s.trainer,required:!0,onChange:t=>l("trainer",t.target.value),autoComplete:"trainer",placeholder:"Trainer..."})}),e.jsx(m,{label:"Course Intro",name:"thumbnail",error:i.thumbnail,children:e.jsx(c,{type:"url",name:"thumbnail",className:"mt-1 block w-full",value:s.thumbnail,onChange:t=>l("thumbnail",t.target.value),autoComplete:"thumbnail",placeholder:"URL Video..."})}),e.jsx(m,{label:"Attachment",name:"url_attachment",error:i.url_attachment,children:e.jsx(c,{type:"url",name:"url_atachment",className:"mt-1 block w-full",value:s.url_atachment,onChange:t=>l("url_atachment",t.target.value),autoComplete:"url_atachment",placeholder:"URL Attachment..."})}),e.jsx(m,{label:"Course Requirement",name:"prerequisite",error:i.prerequisite,children:e.jsx(d,{name:"prerequisite",placeholder:"Select Prerequisite",options:q(h),value:s.prerequisite,onChange:t=>l("prerequisite",t),className:"mt-1 block w-full"})}),e.jsx(m,{label:"Description",name:"description",error:i.description,children:e.jsx(T,{id:"description",className:"mt-1 block w-full",value:s.description,onChange:t=>l("description",t.target.value),autoComplete:"description",placeholder:"Description",rows:3})})]}),s.type.value=="online"&&e.jsx("div",{className:"content-box mt-2",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text--sub-heading",children:"Section"}),e.jsx("button",{className:"btn btn--primary",type:"button",onClick:g,children:e.jsx(x,{})})]})}),s.type.value=="online"&&s.sections.map((t,a)=>e.jsxs("div",{className:"content-box mt-2",children:[e.jsx(m,{label:"Section Name",name:`sections.${a}.name`,error:i[`sections.${a}.name`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(c,{name:`sections.${a}.name`,className:"flex-1 mt-1",value:t.name,onChange:o=>{const r=[...s.sections];r[a].name=o.target.value,l("sections",r)},placeholder:"Section Name..."}),e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>y(a),children:e.jsx(j,{})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between mt-5 mb-3",children:[e.jsx("h2",{className:"text--sub-heading",children:"Sub Section"}),e.jsx("button",{className:"btn-sm btn--primary",type:"button",onClick:()=>C(a),children:e.jsx(x,{size:18})})]}),t.subsections.map((o,r)=>e.jsxs("div",{className:"flex flex-row items-start gap-2 mt-2",children:[e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>w(a,r),children:e.jsx(j,{})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{name:`sections.${a}.subsections.${r}.name`,className:"w-full",value:o.name,onChange:u=>{const p=[...s.sections];p[a].subsections[r].name=u.target.value,l("sections",p)},placeholder:"Name..."}),e.jsx(b,{message:i[`sections.${a}.subsections.${r}.name`],className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{name:`sections.${a}.subsections.${r}.url`,className:"w-full",value:o.url,onChange:u=>{const p=[...s.sections];p[a].subsections[r].url=u.target.value,l("sections",p)},placeholder:"url..."}),e.jsx(b,{message:i[`sections.${a}.subsections.${r}.url`],className:"mt-2"})]})]},r))]},a)),e.jsx("div",{className:"content-box mt-2 text-center",children:e.jsx(P,{className:"w-full justify-center",disabled:N,children:"Submit"})})]})};D.layout=n=>e.jsx(k,{title:"Course Edit",children:n});export{D as default};
