import{W as D,r as p,j as e,b}from"./app-a9e82981.js";import{S as l}from"./react-select.esm-bdc24485.js";import{D as S}from"./DashboardLayout-a559b119.js";import{B as k}from"./Breadcrumb-60be14fc.js";import{F as s}from"./FieldGroup-8ca00edc.js";import{T as u}from"./TextInput-4165aca4.js";import{D as q}from"./DateTimePicker-59f05ce5.js";import{P as B}from"./PrimaryButton-324430ed.js";import{c as g}from"./ReactSelectOption-49a86ad9.js";import"./graduation-cap-b5775cee.js";const A=({bus:c,courses:j})=>{const x=[{link:route("dashboard"),text:"Dashboard"},{link:route("tnas.index"),text:"TNA"}],{data:a,setData:r,post:v,errors:i,processing:P}=D({course:"",bu:null,dept:"",positions:[],users:[],objective:"",participant:"",trainingTime:"",location:"",trainer:""}),[C,d]=p.useState([]),[T,h]=p.useState([]),[f,m]=p.useState([]),y=async t=>{r("bu",t),r(o=>({...o,dept:"",positions:[],users:[]})),d([]),h([]),m([]);try{const o=await b.get(route("deptPosition"),{params:{buId:t.value}});o.status===200&&(d(o.data.depts),h(o.data.positions))}catch(o){console.error(o,"There's something was wrong when bu change")}},w=async t=>{r("positions",t);const o=t.map(n=>n.value);r(n=>({...n,users:[]})),m([]);try{const n=await b.get(route("userPosition"),{params:{buId:a.bu.value,positions:o}});n.status===200&&m(n.data)}catch(n){console.error(n,"There's something was wrong when position change")}},N=t=>{t.preventDefault(),v(route("tnas.store"))};return e.jsxs("div",{className:"content-box",children:[e.jsx(k,{title:"Create TNA",pageName:"Create",prevPage:x}),e.jsxs("form",{onSubmit:N,className:"w-full",children:[e.jsx(s,{label:"Course",name:"course",error:i.course,isPrimary:!0,children:e.jsx(l,{options:g(j),value:a.course,onChange:t=>r("course",t)})}),e.jsx(s,{label:"Business Unit",name:"bu",error:i.bu,isPrimary:!0,children:e.jsx(l,{options:g(c),value:a.bu,onChange:y})}),e.jsx(s,{label:"Department",name:"dept",error:i.dept,isPrimary:!0,children:e.jsx(l,{options:C,value:a.dept,onChange:t=>r("dept",t)})}),e.jsx(s,{label:"Objective",name:"objective",error:i.objective,isPrimary:!0,children:e.jsx(u,{name:"objective",className:"mt-1 block w-full",value:a.objective,onChange:t=>r("objective",t.target.value),required:!0,autoComplete:"objective",placeholder:"TNA Objective..."})}),e.jsx(s,{label:"Estimated Participants",name:"participant",error:i.participant,isPrimary:!0,children:e.jsx(u,{name:"participant",className:"mt-1 block w-full",value:+a.participant,onChange:t=>r("participant",+t.target.value),required:!0,autoComplete:"participant",placeholder:"Estimated Total Participants..."})}),e.jsx(s,{label:"Training Time",name:"trainingTime",error:i.trainingTime,isPrimary:!0,children:e.jsx(q,{minDate:"today",value:a.trainingTime,onChange:t=>r("trainingTime",t),className:"mt-1 block w-full",name:"trainingTime",placeholder:"Select start datetime...",required:!0})}),e.jsx(s,{label:"Location",name:"location",error:i.location,isPrimary:!0,children:e.jsx(u,{name:"location",className:"mt-1 block w-full",value:a.location,onChange:t=>r("location",t.target.value),required:!0,autoComplete:"location",placeholder:"Training Location..."})}),e.jsx(s,{label:"Trainer",name:"trainer",error:i.trainer,isPrimary:!0,children:e.jsx(u,{name:"trainer",className:"mt-1 block w-full",value:a.trainer,onChange:t=>r("trainer",t.target.value),required:!0,autoComplete:"trainer",placeholder:"Training Instructor..."})}),e.jsx(s,{label:"Position",name:"positions",error:i.positions,isPrimary:!0,children:e.jsx(l,{isMulti:!0,options:T,value:a.positions,onChange:w})}),e.jsx(s,{label:"User",name:"users",error:i.users,isPrimary:!0,children:e.jsx(l,{isMulti:!0,options:f,value:a.users,onChange:t=>r("users",t)})}),e.jsx(B,{disabled:P,children:"Submit"})]})]})};A.layout=c=>e.jsx(S,{title:"TNA Create",children:c});export{A as default};
