import{W as X,r as b,j as t,b as C}from"./app-c934f3ea.js";import{S as l}from"./react-select.esm-c08efbbd.js";import{D as Y}from"./DashboardLayout-3bc5976a.js";import{B as Z}from"./Breadcrumb-499b58e3.js";import{F as n}from"./FieldGroup-c59a9442.js";import{T as c}from"./TextInput-d73399b1.js";import{D as ee}from"./DateTimePicker-ff6a72d1.js";import{P as te}from"./PrimaryButton-c44c71bf.js";import{c as P}from"./ReactSelectOption-49a86ad9.js";import"./createLucideIcon-d518e929.js";import"./graduation-cap-47f31973.js";import"./index-387d7a00.js";const re=({tna:u,options:f})=>{const y=[{link:route("dashboard"),text:"Dashboard"},{link:route("tnas.index"),text:"TNA"}],{course:h,bu:g,dept:j,position:v,user:x,title:w,objective:N,participant:D,training_time:O,location:k,trainer:I}=u.data,{courses:E,bus:q,depts:S,positions:A,users:B}=f,U=new Date(O),m=e=>Object.values(e).map(r=>r.value),p=e=>e.map(a=>a.value),{data:i,setData:s,patch:_,errors:o,processing:M}=X({courses:m(h),courseSelected:Object.values(h),bu:g.value,buSelected:g,dept:j.value,deptSelected:j,positions:m(v),positionSelected:Object.values(v),users:m(x),userSelected:Object.values(x),title:w,objective:N,participant:D,trainingTime:U.toISOString(),location:k,trainer:I}),L=e=>{const a=p(e);s(r=>({...r,courses:a,courseSelected:e}))},F=e=>{s(a=>({...a,dept:e.value,deptSelected:e}))},V=S.filter(e=>e.bu_id===i.bu),[G,R]=b.useState(V),[W,T]=b.useState(A),[$,d]=b.useState(B),z=async e=>{const a=S.filter(r=>r.bu_id===e.value);s(r=>({...r,bu:e.value,buSelected:e,dept:"",deptSelected:[],positions:[],positionSelected:[],users:[],userSelected:[]})),d([]),T([]),R(a);try{const r=await C.get(route("buPosition"),{params:{buId:e.value}});r.status===200&&T(r.data.positions)}catch(r){console.error(r,"There's something was wrong when bu change")}},H=async e=>{const a=p(e);s(r=>({...r,positions:a,positionSelected:e,users:[]})),d([]);try{const r=await C.get(route("userPosition"),{params:{buId:i.bu.value,positions:a}});r.status===200&&d(r.data)}catch(r){console.error(r,"There's something was wrong when position change")}},J=e=>{const a=p(e);s(r=>({...r,users:a,userSelected:e}))},K=e=>{const a=parseInt(e.target.value);s("participant",isNaN(a)?"":a)},Q=e=>{e.preventDefault(),_(route("tnas.update",u.data))};return t.jsxs("div",{className:"content-box",children:[t.jsx(Z,{title:"Edit TNA",pageName:"Edit",prevPage:y}),t.jsxs("form",{onSubmit:Q,className:"w-full",children:[t.jsx(n,{label:"Course",name:"course",error:o.course,isPrimary:!0,children:t.jsx(l,{isMulti:!0,options:P(E),value:i.courseSelected,onChange:L})}),t.jsx(n,{label:"Business Unit",name:"bu",error:o.bu,isPrimary:!0,children:t.jsx(l,{options:P(q),value:i.buSelected,onChange:z})}),t.jsx(n,{label:"Department",name:"dept",error:o.dept,isPrimary:!0,children:t.jsx(l,{options:G,value:i.deptSelected,onChange:F})}),t.jsx(n,{label:"Title",name:"title",error:o.title,isPrimary:!0,children:t.jsx(c,{name:"title",className:"mt-1 block w-full",value:i.title,onChange:e=>s("title",e.target.value),required:!0,autoComplete:"tna_title",placeholder:"TNA Title..."})}),t.jsx(n,{label:"Objective",name:"objective",error:o.objective,isPrimary:!0,children:t.jsx(c,{name:"objective",className:"mt-1 block w-full",value:i.objective,onChange:e=>s("objective",e.target.value),required:!0,autoComplete:"objective",placeholder:"TNA Objective..."})}),t.jsx(n,{label:"Estimated Participants",name:"participant",error:o.participant,isPrimary:!0,children:t.jsx(c,{name:"participant",type:"number",min:"0",value:i.participant,onChange:K,className:"mt-1 block w-full",required:!0,autoComplete:"participant",placeholder:"Estimated Total Participants..."})}),t.jsx(n,{label:"Training Time",name:"trainingTime",error:o.trainingTime,isPrimary:!0,children:t.jsx(ee,{value:i.trainingTime,currentDate:i.start_time,onChange:e=>s("trainingTime",e),className:"mt-1 block w-full",name:"trainingTime",placeholder:"Select start datetime...",required:!0})}),t.jsx(n,{label:"Location",name:"location",error:o.location,isPrimary:!0,children:t.jsx(c,{name:"location",className:"mt-1 block w-full",value:i.location,onChange:e=>s("location",e.target.value),required:!0,autoComplete:"location",placeholder:"Training Location..."})}),t.jsx(n,{label:"Trainer",name:"trainer",error:o.trainer,isPrimary:!0,children:t.jsx(c,{name:"trainer",className:"mt-1 block w-full",value:i.trainer,onChange:e=>s("trainer",e.target.value),required:!0,autoComplete:"trainer",placeholder:"Training Instructor..."})}),t.jsx(n,{label:"Position",name:"positions",error:o.position,isPrimary:!0,children:t.jsx(l,{isMulti:!0,options:W,value:i.positionSelected,onChange:H})}),t.jsx(n,{label:"User",name:"users",error:o.users,isPrimary:!0,children:t.jsx(l,{isMulti:!0,options:$,value:i.userSelected,onChange:J})}),t.jsx(te,{disabled:M,children:"Submit"})]})]})};re.layout=u=>t.jsx(Y,{title:"TNA Edit",children:u});export{re as default};
