import{W as _,r as d,j as e,b as g}from"./app-e96334b1.js";import{S as l}from"./react-select.esm-92527921.js";import{D as G}from"./DashboardLayout-0d68dea9.js";import{B as R}from"./Breadcrumb-ed3b7bf0.js";import{F as s}from"./FieldGroup-61ccfcde.js";import{T as c}from"./TextInput-41cc9d70.js";import{D as W}from"./DateTimePicker-dce2d518.js";import{P as $}from"./PrimaryButton-c9f0b968.js";import{c as j}from"./ReactSelectOption-49a86ad9.js";import"./graduation-cap-ea81675c.js";const z=({tna:u,bus:x,courses:v,options:m})=>{const P=[{link:route("dashboard"),text:"Dashboard"},{link:route("tnas.index"),text:"TNA"}],{course:T,bu:f,dept:C,positions:y,users:w,objective:D,participant:N,training_time:S,location:k,trainer:E}=u.data,q=new Date(S),{data:r,setData:a,patch:B,errors:i,processing:I}=_({course:T,bu:f,dept:C,positions:y,users:w,objective:D,participant:N,trainingTime:q.toISOString(),location:k,trainer:E}),[A,h]=d.useState(m.depts),[O,b]=d.useState(m.positions),[U,p]=d.useState(m.users),L=async t=>{a("bu",t),a(o=>({...o,dept:"",positions:[],users:[]})),h([]),b([]),p([]);try{const o=await g.get(route("deptPosition"),{params:{buId:t.value}});o.status===200&&(h(o.data.depts),b(o.data.positions))}catch(o){console.error(o,"There's something was wrong when bu change")}},M=async t=>{a("positions",t);const o=t.map(n=>n.value);a(n=>({...n,users:[]})),p([]);try{const n=await g.get(route("userPosition"),{params:{buId:r.bu.value,positions:o}});n.status===200&&p(n.data)}catch(n){console.error(n,"There's something was wrong when position change")}},F=t=>{t.preventDefault(),B(route("tnas.update",u.data))};return e.jsxs("div",{className:"content-box",children:[e.jsx(R,{title:"Create TNA",pageName:"Create",prevPage:P}),e.jsxs("form",{onSubmit:F,className:"w-full",children:[e.jsx(s,{label:"Course",name:"course",error:i.course,isPrimary:!0,children:e.jsx(l,{options:j(v),value:r.course,onChange:t=>a("course",t)})}),e.jsx(s,{label:"Business Unit",name:"bu",error:i.bu,isPrimary:!0,children:e.jsx(l,{options:j(x),value:r.bu,onChange:L})}),e.jsx(s,{label:"Department",name:"dept",error:i.dept,isPrimary:!0,children:e.jsx(l,{options:A,value:r.dept,onChange:t=>a("dept",t)})}),e.jsx(s,{label:"Objective",name:"objective",error:i.objective,isPrimary:!0,children:e.jsx(c,{name:"objective",className:"mt-1 block w-full",value:r.objective,onChange:t=>a("objective",t.target.value),required:!0,autoComplete:"objective",placeholder:"TNA Objective..."})}),e.jsx(s,{label:"Estimated Participants",name:"participant",error:i.participant,isPrimary:!0,children:e.jsx(c,{name:"participant",className:"mt-1 block w-full",value:+r.participant,onChange:t=>a("participant",+t.target.value),required:!0,autoComplete:"participant",placeholder:"Estimated Total Participants..."})}),e.jsx(s,{label:"Training Time",name:"trainingTime",error:i.trainingTime,isPrimary:!0,children:e.jsx(W,{value:r.trainingTime,currentDate:r.start_time,onChange:t=>a("trainingTime",t),className:"mt-1 block w-full",name:"trainingTime",placeholder:"Select start datetime...",required:!0})}),e.jsx(s,{label:"Location",name:"location",error:i.location,isPrimary:!0,children:e.jsx(c,{name:"location",className:"mt-1 block w-full",value:r.location,onChange:t=>a("location",t.target.value),required:!0,autoComplete:"location",placeholder:"Training Location..."})}),e.jsx(s,{label:"Trainer",name:"trainer",error:i.trainer,isPrimary:!0,children:e.jsx(c,{name:"trainer",className:"mt-1 block w-full",value:r.trainer,onChange:t=>a("trainer",t.target.value),required:!0,autoComplete:"trainer",placeholder:"Training Instructor..."})}),e.jsx(s,{label:"Position",name:"positions",error:i.positions,isPrimary:!0,children:e.jsx(l,{isMulti:!0,options:O,value:r.positions,onChange:M})}),e.jsx(s,{label:"User",name:"users",error:i.users,isPrimary:!0,children:e.jsx(l,{isMulti:!0,options:U,value:r.users,onChange:t=>a("users",t)})}),e.jsx($,{disabled:I,children:"Submit"})]})]})};z.layout=u=>e.jsx(G,{title:"TNA Edit",children:u});export{z as default};
