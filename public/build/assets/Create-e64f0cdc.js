import{W as S,j as e}from"./app-2e8a992c.js";import{S as p}from"./react-select.esm-d868bbe6.js";import{D as $}from"./DashboardLayout-4ad65817.js";import{B as P}from"./Breadcrumb-98066433.js";import{F as c}from"./FieldGroup-37f53d7b.js";import{T as d}from"./TextInput-a0175cb0.js";import{I as D}from"./InputError-a85fb1b1.js";import{D as A}from"./DateTimePicker-3b0cf847.js";import{P as x}from"./PrimaryButton-b7735ba5.js";import{c as M}from"./ReactSelectOption-49a86ad9.js";import{P as b}from"./plus-c22cad1d.js";import{T as j}from"./trash-2-68963d18.js";import"./graduation-cap-12ceba5a.js";const Q=({courses:u})=>{const f=[{link:route("dashboard"),text:"Dashboard"},{link:route("tests.index"),text:"Test"}],{data:a,setData:n,post:w,errors:l,processing:h}=S({course_id:"",selectCourse:"",access_time:"",minimum_score:"",type:"",selectType:"",questions:[{name:"",answers:[{text:"",is_correct:""}]}]}),y=t=>{n(s=>({...s,course_id:t.value,selectCourse:t}))},g=t=>{n(s=>({...s,type:t.value,selectType:t}))},v=t=>{const s=Math.max(0,Math.min(100,parseInt(t.target.value)));n("minimum_score",isNaN(s)?"":s)},N=()=>{n("questions",[...a.questions,{name:"",answers:[{text:"",is_correct:""}]}])},C=t=>{const s=a.questions.filter((o,r)=>r!==t);n("questions",s)},k=t=>{const s=[...a.questions];s[t].answers.push({text:"",is_correct:""}),n("questions",s)},T=(t,s)=>{const o=[...a.questions];o[t].answers=o[t].answers.filter((r,i)=>i!==s),n("questions",o)},_=t=>{t.preventDefault(),w(route("tests.store"))};return e.jsxs("form",{onSubmit:_,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx(P,{pageName:"Create Test",prevPage:f}),e.jsx(c,{label:"Course",name:"selectCourse",error:l.course,isPrimary:!0,children:e.jsx(p,{name:"selectCourse",placeholder:"Select Course...",options:M(u),value:a.selectCourse,onChange:y,className:"mt-1 block w-full",required:!0})}),e.jsx(c,{label:"Course Type",name:"type",error:l.type,isPrimary:!0,children:e.jsx(p,{name:"type",placeholder:"Select Type...",options:[{value:"knowledge",label:"Knowledge"},{value:"skill",label:"Skill"}],value:a.selectType,onChange:g,className:"mt-1 block w-full",required:!0})}),a.type=="knowledge"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Minimum Score",name:"minimumScore",error:l.minimum_score,isPrimary:!0,children:e.jsx(d,{name:"minimumScore",type:"number",min:"0",max:"100",value:a.minimum_score,onChange:v,className:"mt-1 block w-full",placeholder:"Minimum score (0-100)...",required:!0})}),e.jsx(c,{label:"Access Time",name:"accessTime",error:l.access_time,children:e.jsx(A,{minDate:"today",withTime:!1,value:a.access_time,onChange:t=>n("access_time",t),className:"mt-1 block w-full",name:"accessTime",placeholder:"Select access time..."})})]}),a.type!=="knowledge"&&e.jsx(x,{disabled:h,children:"Submit"})]}),a.type=="knowledge"&&e.jsx("div",{className:"content-box mt-2",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text--sub-heading",children:"Question"}),e.jsx("button",{className:"btn btn--primary",type:"button",onClick:N,children:e.jsx(b,{})})]})}),a.type=="knowledge"&&a.questions.map((t,s)=>e.jsxs("div",{className:"content-box mt-2",children:[e.jsx(c,{label:`Question no. ${s+1}`,name:`questions.${s}.name`,error:l[`questions.${s}.name`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(d,{name:`questions.${s}.name`,className:"flex-1 mt-1",value:t.name,onChange:o=>{const r=[...a.questions];r[s].name=o.target.value,n("questions",r)},placeholder:"Question Text..."}),e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>C(s),children:e.jsx(j,{})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between mt-5 mb-3",children:[e.jsx("h2",{className:"text--sub-heading",children:"Answer"}),e.jsx("button",{className:"btn-sm btn--primary",type:"button",onClick:()=>k(s),children:e.jsx(b,{size:18})})]}),t.answers.map((o,r)=>e.jsxs("div",{className:"flex flex-row items-start gap-2 mt-2",children:[e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>T(s,r),children:e.jsx(j,{})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{name:`questions.${s}.answers.${r}.name`,className:"w-full",value:o.name,onChange:i=>{const m=[...a.questions];m[s].answers[r].text=i.target.value,n("questions",m)},placeholder:"Answer Text..."}),e.jsx(D,{message:l[`questions.${s}.answers.${r}.name`],className:"mt-2"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:`questions.${s}.answers.${r}.isCorrect`,checked:o.is_correct,value:o.is_correct,onChange:()=>{const i=[...a.questions];i[s].answers.forEach((m,q)=>m.is_correct=q===r),n("questions",i)}}),"Correct"]})})]},r))]},s)),a.type=="knowledge"&&e.jsx("div",{className:"content-box mt-2 text-center",children:e.jsx(x,{className:"w-full justify-center",disabled:h,children:"Submit"})})]})};Q.layout=u=>e.jsx($,{title:"Tes Create",children:u});export{Q as default};
