import{W as S,r as p,j as e,b}from"./app-a5b99895.js";import{S as l}from"./react-select.esm-2ba6cc96.js";import{D as k}from"./DashboardLayout-3c2437e2.js";import{B as q}from"./Breadcrumb-a9230718.js";import{F as o}from"./FieldGroup-0913ed8f.js";import{T as u}from"./TextInput-423a0223.js";import{D as B}from"./DateTimePicker-e4e81f2f.js";import{P as I}from"./PrimaryButton-cd234c3b.js";import{c as g}from"./ReactSelectOption-49a86ad9.js";import"./graduation-cap-8fe0539b.js";const A=({bus:c,courses:j})=>{const x=[{link:route("dashboard"),text:"Dashboard"},{link:route("tnas.index"),text:"TNA"}],{data:a,setData:i,post:v,errors:s,processing:P}=S({course:"",bu:null,dept:"",positions:[],users:[],objective:"",participant:"",trainingTime:"",location:"",trainer:""}),[C,d]=p.useState([]),[T,h]=p.useState([]),[f,m]=p.useState([]),y=async t=>{i(r=>({...r,bu:t,dept:"",positions:[],users:[]})),d([]),h([]),m([]);try{const r=await b.get(route("deptPosition"),{params:{buId:t.value}});r.status===200&&(d(r.data.depts),h(r.data.positions))}catch(r){console.error(r,"There's something was wrong when bu change")}},w=async t=>{i("positions",t);const r=t.map(n=>n.value);i(n=>({...n,users:[]})),m([]);try{const n=await b.get(route("userPosition"),{params:{buId:a.bu.value,positions:r}});n.status===200&&m(n.data)}catch(n){console.error(n,"There's something was wrong when position change")}},N=t=>{const r=parseInt(t.target.value);i("participant",isNaN(r)?"":r)},D=t=>{t.preventDefault(),v(route("tnas.store"))};return e.jsxs("div",{className:"content-box",children:[e.jsx(q,{title:"Create TNA",pageName:"Create",prevPage:x}),e.jsxs("form",{onSubmit:D,className:"w-full",children:[e.jsx(o,{label:"Course",name:"course",error:s.course,isPrimary:!0,children:e.jsx(l,{options:g(j),value:a.course,onChange:t=>i("course",t)})}),e.jsx(o,{label:"Business Unit",name:"bu",error:s.bu,isPrimary:!0,children:e.jsx(l,{options:g(c),value:a.bu,onChange:y})}),e.jsx(o,{label:"Department",name:"dept",error:s.dept,isPrimary:!0,children:e.jsx(l,{options:C,value:a.dept,onChange:t=>i("dept",t)})}),e.jsx(o,{label:"Objective",name:"objective",error:s.objective,isPrimary:!0,children:e.jsx(u,{name:"objective",className:"mt-1 block w-full",value:a.objective,onChange:t=>i("objective",t.target.value),required:!0,autoComplete:"objective",placeholder:"TNA Objective..."})}),e.jsx(o,{label:"Estimated Participants",name:"participant",error:s.participant,isPrimary:!0,children:e.jsx(u,{name:"participant",type:"number",min:"0",value:a.participant,onChange:N,className:"mt-1 block w-full",required:!0,autoComplete:"participant",placeholder:"Estimated Total Participants..."})}),e.jsx(o,{label:"Training Time",name:"trainingTime",error:s.trainingTime,isPrimary:!0,children:e.jsx(B,{minDate:"today",value:a.trainingTime,onChange:t=>i("trainingTime",t),className:"mt-1 block w-full",name:"trainingTime",placeholder:"Select start datetime...",required:!0})}),e.jsx(o,{label:"Location",name:"location",error:s.location,isPrimary:!0,children:e.jsx(u,{name:"location",className:"mt-1 block w-full",value:a.location,onChange:t=>i("location",t.target.value),required:!0,autoComplete:"location",placeholder:"Training Location..."})}),e.jsx(o,{label:"Trainer",name:"trainer",error:s.trainer,isPrimary:!0,children:e.jsx(u,{name:"trainer",className:"mt-1 block w-full",value:a.trainer,onChange:t=>i("trainer",t.target.value),required:!0,autoComplete:"trainer",placeholder:"Training Instructor..."})}),e.jsx(o,{label:"Position",name:"positions",error:s.positions,isPrimary:!0,children:e.jsx(l,{isMulti:!0,options:T,value:a.positions,onChange:w})}),e.jsx(o,{label:"User",name:"users",error:s.users,isPrimary:!0,children:e.jsx(l,{isMulti:!0,options:f,value:a.users,onChange:t=>i("users",t)})}),e.jsx(I,{disabled:P,children:"Submit"})]})]})};A.layout=c=>e.jsx(k,{title:"TNA Create",children:c});export{A as default};
