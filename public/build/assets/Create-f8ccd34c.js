import{W as S,j as e}from"./app-72aaa421.js";import{S as h}from"./react-select.esm-aa822d5a.js";import{D as T}from"./DashboardLayout-1db68d21.js";import{B as _}from"./Breadcrumb-d38887d1.js";import{F as m}from"./FieldGroup-b00c69af.js";import{T as d}from"./TextInput-e34af910.js";import{I as q}from"./InputError-b058629a.js";import{P as b}from"./PrimaryButton-3b2e16c9.js";import{c as $}from"./ReactSelectOption-49a86ad9.js";import{P}from"./plus-7368c087.js";import{T as D}from"./trash-2-fd2e98e6.js";import"./graduation-cap-c57be5ac.js";const M=({courses:u})=>{const j=[{link:route("dashboard"),text:"Dashboard"},{link:route("tests.index"),text:"Test"}],{data:t,setData:a,post:f,errors:n,processing:x}=S({course_id:"",selectCourse:"",minimum_score:"",type:"",selectType:"",questions:[{text:"",answers:[{text:"",is_correct:""}]}]}),y=r=>{a(s=>({...s,course_id:r.value,selectCourse:r}))},w=r=>{a(s=>({...s,type:r.value,selectType:r}))},g=r=>{const s=Math.max(0,Math.min(100,parseInt(r.target.value)));a("minimum_score",isNaN(s)?"":s)},v=()=>{a("questions",[...t.questions,{text:"",answers:[{text:"",is_correct:""}]}])},C=r=>{const s=t.questions.filter((p,o)=>o!==r);a("questions",s)},N=r=>{r.preventDefault(),f(route("tests.store"))};return e.jsxs("form",{onSubmit:N,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx(_,{pageName:"Create Test",prevPage:j}),e.jsx(m,{label:"Course",name:"selectCourse",error:n.course,isPrimary:!0,children:e.jsx(h,{name:"selectCourse",placeholder:"Select Course...",options:$(u),value:t.selectCourse,onChange:y,className:"mt-1 block w-full",required:!0})}),e.jsx(m,{label:"Course Type",name:"type",error:n.type,isPrimary:!0,children:e.jsx(h,{name:"type",placeholder:"Select Type...",options:[{value:"knowledge",label:"Knowledge"},{value:"skill",label:"Skill"}],value:t.selectType,onChange:w,className:"mt-1 block w-full",required:!0})}),t.type=="knowledge"&&e.jsx(e.Fragment,{children:e.jsx(m,{label:"Minimum Score",name:"minimumScore",error:n.minimum_score,isPrimary:!0,children:e.jsx(d,{name:"minimumScore",type:"number",min:"0",max:"100",value:t.minimum_score,onChange:g,className:"mt-1 block w-full",placeholder:"Minimum score (0-100)...",required:!0})})}),t.type!=="knowledge"&&e.jsx(b,{disabled:x,children:"Submit"})]}),t.type=="knowledge"&&e.jsx("div",{className:"content-box mt-2",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text--sub-heading",children:"Question"}),e.jsx("button",{className:"btn btn--primary",type:"button",onClick:v,children:e.jsx(P,{})})]})}),t.type=="knowledge"&&t.questions.map((r,s)=>e.jsxs("div",{className:"content-box mt-2",children:[e.jsx(m,{label:`Question no. ${s+1}`,name:`questions.${s}.text`,error:n[`questions.${s}.text`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(d,{name:`questions.${s}.text`,className:"flex-1 mt-1",value:r.text,onChange:p=>{const o=[...t.questions];o[s].text=p.target.value,a("questions",o)},placeholder:"Question Text..."}),e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>C(s),children:e.jsx(D,{})})]})}),[...Array(3)].map((p,o)=>{const i=r.answers[o]||{text:"",is_correct:!1};return e.jsxs("div",{className:"flex flex-row items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",name:`questions.${s}.answers.${o}.isCorrect`,checked:i.is_correct,value:i.is_correct,onChange:()=>{const l=[...t.questions];l[s].answers=l[s].answers.map((c,k)=>({...c,is_correct:k===o})),a("questions",l)}}),e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{name:`questions.${s}.answers.${o}.text`,className:"w-full",value:i.text,onChange:l=>{const c=[...t.questions];c[s].answers[o]={...i,text:l.target.value},a("questions",c)},placeholder:"Answer Text..."}),e.jsx(q,{message:n[`questions.${s}.answers.${o}.name`],className:"mt-2"})]})]},o)})]},s)),t.type=="knowledge"&&e.jsx("div",{className:"content-box mt-2 text-center",children:e.jsx(b,{className:"w-full justify-center",disabled:x,children:"Submit"})})]})};M.layout=u=>e.jsx(T,{title:"Tes Create",children:u});export{M as default};
