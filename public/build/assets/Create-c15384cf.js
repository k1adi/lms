import{W as O,r as p,j as t,b as h}from"./app-4a46fc6f.js";import{S as l}from"./react-select.esm-21bc4562.js";import{D as A}from"./DashboardLayout-479ce328.js";import{B}from"./Breadcrumb-aa69014e.js";import{F as n}from"./FieldGroup-136c92f3.js";import{T as c}from"./TextInput-db2ab464.js";import{D as E}from"./DateTimePicker-c3b33acd.js";import{P as M}from"./PrimaryButton-0a64fb3a.js";import{c as b}from"./ReactSelectOption-49a86ad9.js";import"./createLucideIcon-9557887a.js";import"./graduation-cap-39a9194c.js";import"./index-387d7a00.js";const U=({depts:u,bus:g,courses:j})=>{const v=[{link:route("dashboard"),text:"Dashboard"},{link:route("tnas.index"),text:"TNA"}],{data:s,setData:i,post:x,errors:o,processing:C}=O({courses:[],courseSelected:[],bu:"",buSelected:"",dept:"",deptSelected:"",positions:[],positionSelected:[],users:[],userSelected:[],title:"",objective:"",participant:"",trainingTime:"",location:"",trainer:""}),S=e=>{const a=e.map(r=>r.value);i(r=>({...r,courses:a,courseSelected:e}))},T=e=>{i(a=>({...a,dept:e.value,deptSelected:e}))},[f,P]=p.useState([]),[y,d]=p.useState([]),[N,m]=p.useState([]),w=async e=>{const a=u.filter(r=>r.bu_id===e.value);i(r=>({...r,bu:e.value,buSelected:e,dept:"",deptSelected:[],positions:[],positionSelected:[],users:[]})),P(a),d([]),m([]);try{const r=await h.get(route("buPosition"),{params:{buId:e.value}});r.status===200&&d(r.data.positions)}catch(r){console.error(r,"There's something was wrong when bu change")}},D=async e=>{const a=e.map(r=>r.value);if(i(r=>({...r,positions:a,positionSelected:e,users:[]})),m([]),e.length!==0)try{const r=await h.get(route("userPosition"),{params:{buId:s.bu,positions:a}});r.status===200&&m(r.data.users)}catch(r){console.error(r,"There's something was wrong when position change")}},k=e=>{const a=e.map(r=>r.value);i(r=>({...r,users:a,userSelected:e}))},I=e=>{const a=parseInt(e.target.value);i("participant",isNaN(a)?"":a)},q=e=>{e.preventDefault(),x(route("tnas.store"))};return t.jsxs("div",{className:"content-box",children:[t.jsx(B,{title:"Create TNA",pageName:"Create",prevPage:v}),t.jsxs("form",{onSubmit:q,className:"w-full",children:[t.jsx(n,{label:"Course",name:"course",error:o.course,isPrimary:!0,children:t.jsx(l,{isMulti:!0,options:b(j),value:s.courseSelected,onChange:S})}),t.jsx(n,{label:"Business Unit",name:"bu",error:o.bu,isPrimary:!0,children:t.jsx(l,{options:b(g),value:s.buSelected,onChange:w})}),t.jsx(n,{label:"Department",name:"dept",error:o.dept,isPrimary:!0,children:t.jsx(l,{options:f,value:s.deptSelected,onChange:T})}),t.jsx(n,{label:"Title",name:"title",error:o.title,isPrimary:!0,children:t.jsx(c,{name:"title",className:"mt-1 block w-full",value:s.title,onChange:e=>i("title",e.target.value),required:!0,autoComplete:"tna_title",placeholder:"TNA Title..."})}),t.jsx(n,{label:"Objective",name:"objective",error:o.objective,isPrimary:!0,children:t.jsx(c,{name:"objective",className:"mt-1 block w-full",value:s.objective,onChange:e=>i("objective",e.target.value),required:!0,autoComplete:"objective",placeholder:"TNA Objective..."})}),t.jsx(n,{label:"Estimated Participants",name:"participant",error:o.participant,isPrimary:!0,children:t.jsx(c,{name:"participant",type:"number",min:"0",value:s.participant,onChange:I,className:"mt-1 block w-full",required:!0,autoComplete:"participant",placeholder:"Estimated Total Participants..."})}),t.jsx(n,{label:"Training Time",name:"trainingTime",error:o.trainingTime,isPrimary:!0,children:t.jsx(E,{minDate:"today",value:s.trainingTime,onChange:e=>i("trainingTime",e),className:"mt-1 block w-full",name:"trainingTime",placeholder:"Select start datetime...",required:!0})}),t.jsx(n,{label:"Location",name:"location",error:o.location,isPrimary:!0,children:t.jsx(c,{name:"location",className:"mt-1 block w-full",value:s.location,onChange:e=>i("location",e.target.value),required:!0,autoComplete:"location",placeholder:"Training Location..."})}),t.jsx(n,{label:"Trainer",name:"trainer",error:o.trainer,isPrimary:!0,children:t.jsx(c,{name:"trainer",className:"mt-1 block w-full",value:s.trainer,onChange:e=>i("trainer",e.target.value),required:!0,autoComplete:"trainer",placeholder:"Training Instructor..."})}),t.jsx(n,{label:"Position",name:"positions",error:o.positions,isPrimary:!0,children:t.jsx(l,{isMulti:!0,options:y,value:s.positionSelected,onChange:D})}),t.jsx(n,{label:"User",name:"users",error:o.users,isPrimary:!0,children:t.jsx(l,{isMulti:!0,options:N,value:s.userSelected,onChange:k})}),t.jsx(M,{disabled:C,children:"Submit"})]})]})};U.layout=u=>t.jsx(A,{title:"TNA Create",children:u});export{U as default};
