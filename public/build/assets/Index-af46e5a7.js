import{W as k,j as e}from"./app-4a46fc6f.js";import{S as u}from"./react-select.esm-21bc4562.js";import{D as C}from"./DashboardLayout-479ce328.js";import{B as D}from"./Breadcrumb-aa69014e.js";import{F as l}from"./FieldGroup-136c92f3.js";import{T as s}from"./TextInput-db2ab464.js";import{P as M}from"./PrimaryButton-0a64fb3a.js";import{c as d}from"./ReactSelectOption-49a86ad9.js";import F from"./MyReportTable-cfa4476d.js";import"./createLucideIcon-9557887a.js";import"./graduation-cap-39a9194c.js";import"./CapitalizeWord-ef06e675.js";import"./badge-check-a29b1e55.js";const S=({auth:n,user:i,pivots:p,reports:c})=>{const h=[{link:route("dashboard"),text:"Dashboard"}],b=n.user.finisheds,{full_name:x,username:f,has_role:j,email:v,no_hp:_,no_nik:N,has_depts:w}=i,{data:r,setData:t,patch:g,errors:o,processing:y}=k({full_name:x,username:f,roles:j,email:v,no_hp:_,no_nik:N,password:"",pivot:p.map(a=>({bu:a.bu.name,position:d(a.positions),dept:d(w.filter(m=>m.bu_id=a.bu.id))}))}),P=a=>{a.preventDefault(),g(route("profile.update",i))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"content-box mb-3",children:[e.jsx(D,{title:"My Profile",pageName:"Profile",prevPage:h}),e.jsxs("form",{onSubmit:P,className:"w-full",children:[e.jsx(l,{label:"Username",name:"username",error:o.username,isPrimary:!0,children:e.jsx(s,{name:"username",className:"mt-1 block w-full",value:r.username,onChange:a=>t("username",a.target.value),required:!0,autoComplete:"username",placeholder:"Username..."})}),e.jsx(l,{label:"Full Name",name:"full_name",error:o.full_name,isPrimary:!0,children:e.jsx(s,{name:"full_name",className:"mt-1 block w-full",value:r.full_name,onChange:a=>t("full_name",a.target.value),required:!0,autoComplete:"full_name",placeholder:"Full Name..."})}),e.jsx(l,{label:"Email",name:"email",error:o.email,isPrimary:!0,children:e.jsx(s,{name:"email",type:"email",className:"mt-1 block w-full",value:r.email,onChange:a=>t("email",a.target.value),required:!0,autoComplete:"email",placeholder:"User Email..."})}),e.jsx(l,{label:"Phone",name:"no_hp",error:o.no_hp,isPrimary:!0,children:e.jsx(s,{name:"no_hp",className:"mt-1 block w-full",value:r.no_hp,onChange:a=>t("no_hp",a.target.value),required:!0,autoComplete:"no_hp",placeholder:"Handphone Number..."})}),e.jsx(l,{label:"Password",name:"password",error:o.password,children:e.jsx(s,{type:"password",name:"password",className:"mt-1 block w-full",value:r.password,onChange:a=>t("password",a.target.value),autoComplete:"password",placeholder:"Password..."})}),e.jsx(l,{label:"NIK",name:"no_nik",error:o.no_nik,children:e.jsx(s,{name:"no_nik",className:"mt-1 block w-full",value:r.no_nik,readOnly:!0,disabled:!0})}),e.jsx(l,{label:"Roles",name:"role",error:o.role,isPrimary:!0,children:e.jsx(s,{name:"roles",className:"mt-1 block w-full",value:r.roles[0].name,readOnly:!0,disabled:!0})}),r.pivot.map((a,m)=>e.jsx(l,{label:"Business Unit & Position",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{name:"roles",className:"mt-1",value:a.bu,readOnly:!0,disabled:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsx(u,{isMulti:!0,name:`pivot.${m}.dept`,value:a.dept,className:"mt-1",isDisabled:!0}),e.jsx(u,{isMulti:!0,name:`pivot.${m}.position`,value:a.position,className:"mt-2",isDisabled:!0})]})]})},m)),e.jsx(M,{disabled:y,children:"Submit"})]})]}),e.jsxs("div",{className:"content-box",children:[e.jsx("h1",{className:"text--title",children:"My Report"}),e.jsx(F,{graduated:b,reports:c})]})]})};S.layout=n=>e.jsx(C,{title:"My Profile",children:n});export{S as default};
