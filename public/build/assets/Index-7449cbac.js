import{j as e,q as w,r as a,b as P,a as x,y as S}from"./app-315333c7.js";import{D as _}from"./DashboardLayout-b1e99a3e.js";import{B as E}from"./Breadcrumb-936b9988.js";import{P as C}from"./pencil-041aecbf.js";import{T as L}from"./trash-2-b72a4de9.js";import"./graduation-cap-e2e88161.js";function D(){return e.jsx("div",{className:"animate-pulse content-box text-center",children:e.jsx("h1",{className:"text--sub-heading py-2",children:"Loading...."})})}function R({lastIndex:s,total:o,currentPage:n,lastPage:c,onPageChange:i}){return e.jsxs("div",{className:"flex align-center justify-between pt-6 pb-4",children:[e.jsxs("span",{children:["Showing ",e.jsx("b",{children:s})," of ",e.jsx("b",{children:o})," Entries"]}),e.jsxs("nav",{className:"flex",children:[e.jsx("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>i(n-1),children:"Previous"}),e.jsx("button",{className:"flex items-center justify-center px-3 h-8 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>i(n+1),children:"Next"})]})]})}const T=()=>{const{auth:s}=w().props,[o,n]=a.useState(0),[c,i]=a.useState(!1),[d,h]=a.useState([]),[l,m]=a.useState(1),[u,p]=a.useState(1),[g,b]=a.useState(0),[j,f]=a.useState(0),y=[{link:route("dashboard"),text:"Dashboard"},{link:"#",text:"Setting"}];a.useEffect(()=>{N(l)},[l]);const N=async r=>{i(!0);try{const t=await P.get(route("permissions.list"),{params:{page:r}});h(t.data.data),m(t.data.current_page),p(t.data.last_page),n(t.data.total),b(t.data.to),f(t.data.from)}catch(t){console.error("Error fetching permissions: ",t)}finally{i(!1)}},v=r=>{confirm("Are you sure you want to delete this permission?")&&S.delete(route("permissions.destroy",r))},k=r=>{m(r)};return c?e.jsx(D,{}):e.jsxs("div",{className:"content-box",children:[e.jsx(E,{pageName:"Permissions",prevPage:y}),s.permissions.includes("permission_create")&&e.jsx(x,{className:"btn btn--primary",href:route("permissions.create"),children:" Create "}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"table--number",children:"No."}),e.jsx("th",{children:"Name"}),(s.permissions.includes("permission_edit")||s.permissions.includes("permission_delete"))&&e.jsx("th",{className:"table--action",children:"Action"})]})}),e.jsx("tbody",{children:d.length!==0?d.map((r,t)=>e.jsxs("tr",{className:"py-2",children:[e.jsx("td",{children:j+t}),e.jsx("td",{children:r.name}),(s.permissions.includes("permission_edit")||s.permissions.includes("permission_delete"))&&e.jsxs("td",{className:"table--action",children:[s.permissions.includes("permission_edit")&&e.jsxs(x,{href:route("permissions.edit",r.id),className:"text-warning",children:[e.jsx(C,{className:"inline-block mb-1",size:14})," Edit"]}),s.permissions.includes("permission_delete")&&e.jsxs("button",{className:"text-red-600 ml-2",type:"button",onClick:()=>v(r.id),children:[e.jsx(L,{className:"inline-block mb-1",size:14})," Delete"]})]})]},t)):e.jsx("tr",{className:"text-center",children:e.jsx("td",{colSpan:3,children:"Empty data"})})})]})}),e.jsx(R,{total:o,lastIndex:g,currentPage:l,lastPage:u,onPageChange:k})]})};T.layout=s=>e.jsx(_,{title:"Permissions",children:s});export{T as default};
