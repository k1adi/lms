import{W as k,j as e}from"./app-4a46fc6f.js";import{S as c}from"./react-select.esm-21bc4562.js";import{D as C}from"./DashboardLayout-479ce328.js";import{B as S}from"./Breadcrumb-aa69014e.js";import{F as i}from"./FieldGroup-136c92f3.js";import{T as m}from"./TextInput-db2ab464.js";import{P as _}from"./PrimaryButton-0a64fb3a.js";import{c as d}from"./ReactSelectOption-49a86ad9.js";import{P as y}from"./plus-06b3f79a.js";import{T as P}from"./trash-2-3dd3058b.js";import"./createLucideIcon-9557887a.js";import"./graduation-cap-39a9194c.js";const $=({bus:p,roles:b,positions:h})=>{const f=[{link:route("dashboard"),text:"Dashboard"},{link:route("users.index"),text:"User"}],{data:s,setData:t,post:j,errors:o,processing:v}=k({full_name:"",username:"",role:[],roleSelected:[],email:"",no_hp:"",no_nik:"",password:"",pivot:[{bu:null,buSelected:null,positions:[],positionSelected:[],depts:[],deptOptions:[],deptSelected:[]}]}),x=()=>{t("pivot",[...s.pivot,{bu:null,position:[]}])},g=l=>{const a=s.pivot.filter((n,r)=>r!==l);t("pivot",a)},N=l=>{t(a=>({...a,role:l.value,roleSelected:l}))},w=l=>{l.preventDefault(),j(route("users.store"))};return e.jsxs("form",{onSubmit:w,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx(S,{title:"Create User",pageName:"Create",prevPage:f}),e.jsx(i,{label:"Full Name",name:"full_name",error:o.full_name,isPrimary:!0,children:e.jsx(m,{name:"full_name",className:"mt-1 block w-full",value:s.full_name,onChange:l=>t("full_name",l.target.value),required:!0,isFocused:!0,autoComplete:"full_name",placeholder:"Full Name..."})}),e.jsx(i,{label:"Username",name:"username",error:o.username,isPrimary:!0,children:e.jsx(m,{name:"username",className:"mt-1 block w-full",value:s.username,onChange:l=>t("username",l.target.value),required:!0,autoComplete:"username",placeholder:"Username..."})}),e.jsx(i,{label:"Roles",name:"role",error:o.role,isPrimary:!0,children:e.jsx(c,{options:d(b),value:s.roleSelected,onChange:N})}),e.jsx(i,{label:"User Email",name:"email",error:o.email,isPrimary:!0,children:e.jsx(m,{name:"email",type:"email",className:"mt-1 block w-full",value:s.email,onChange:l=>t("email",l.target.value),required:!0,autoComplete:"email",placeholder:"User Email..."})}),e.jsx(i,{label:"User Phone",name:"no_hp",error:o.no_hp,isPrimary:!0,children:e.jsx(m,{name:"no_hp",className:"mt-1 block w-full",value:s.no_hp,onChange:l=>t("no_hp",l.target.value),required:!0,autoComplete:"no_hp",placeholder:"Handphone Number..."})}),e.jsx(i,{label:"User NIK",name:"no_nik",error:o.no_nik,isPrimary:!0,children:e.jsx(m,{name:"no_nik",className:"mt-1 block w-full",value:s.no_nik,onChange:l=>t("no_nik",l.target.value),required:!0,autoComplete:"no_nik",placeholder:"NIK..."})}),e.jsx(i,{label:"Password",name:"password",error:o.password,isPrimary:!0,children:e.jsx(m,{type:"password",name:"password",className:"mt-1 block w-full",value:s.password,onChange:l=>t("password",l.target.value),required:!0,autoComplete:"password",placeholder:"Password..."})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{className:"btn btn--primary text-black font-semibold",type:"button",onClick:x,children:[e.jsx(y,{className:"inline-block mb-1"})," Add Positioning"]}),e.jsx(_,{disabled:v,children:"Submit"})]})]}),s.pivot.map((l,a)=>e.jsx("div",{className:"content-box mt-2 z-0",children:e.jsxs("div",{className:"py-2 border-b border-gray-300",children:[e.jsx(i,{label:"Business Unit",name:`pivot.${a}.bu`,error:o[`pivot.${a}.bu`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(c,{name:`pivot.${a}.bu`,placeholder:"Select Type...",options:d(p),value:l.buSelected,onChange:async n=>{const r=[...s.pivot];r[a].bu=n.value,r[a].buSelected=n,r[a].depts=[],r[a].deptSelected=[];const u=await axios.get(`/getBuDept/${n.value}`);r[a].deptOptions=u.data,t("pivot",r)},className:"mt-1 block w-full"}),e.jsx("button",{className:"btn-sm btn--danger",type:"button",onClick:()=>g(a),children:e.jsx(P,{})})]})}),e.jsx(i,{label:"Position",name:`pivot.${a}.position`,error:o[`pivot.${a}.position`],children:e.jsx(c,{isMulti:!0,name:`pivot.${a}.position`,placeholder:"Select Type...",options:d(h),value:l.positionSelected,onChange:n=>{const r=[...s.pivot];r[a].positions=n.map(u=>u.value),r[a].positionSelected=n,t("pivot",r)},className:"mt-1 block w-full"})}),e.jsx(i,{label:"Department",name:`pivot.${a}.dept`,error:o[`pivot.${a}.dept`],children:e.jsx(c,{isMulti:!0,name:`pivot.${a}.dept`,placeholder:"Select Department...",options:s.pivot[a].deptOptions||[],value:l.deptSelected,onChange:n=>{const r=[...s.pivot];r[a].depts=n.map(u=>u.value),r[a].deptSelected=n,t("pivot",r)},className:"mt-1 block w-full"})})]})},a))]})};$.layout=p=>e.jsx(C,{title:"User Create",children:p});export{$ as default};
