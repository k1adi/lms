import{W as q,j as e}from"./app-4a46fc6f.js";import{S as b}from"./react-select.esm-21bc4562.js";import{D as A}from"./DashboardLayout-479ce328.js";import{B as E}from"./Breadcrumb-aa69014e.js";import{F as m}from"./FieldGroup-136c92f3.js";import{T as u}from"./TextInput-db2ab464.js";import{I as F}from"./InputError-b7c111d7.js";import{T as j}from"./TextArea-2fef2190.js";import{P as L}from"./PrimaryButton-0a64fb3a.js";import{C as f}from"./CapitalizeWord-ef06e675.js";import{P as x}from"./plus-06b3f79a.js";import{T as v}from"./trash-2-3dd3058b.js";import"./createLucideIcon-9557887a.js";import"./graduation-cap-39a9194c.js";const B=({course:p})=>{const y=[{link:route("dashboard"),text:"Dashboard"},{link:route("courses.index"),text:"Courses"}],{name:N,type:d,trainer:g,thumbnail:C,url_attachment:h,description:w,sections:$}=p,{data:l,setData:r,patch:S,errors:o,processing:_}=q({name:N,type:{value:d,label:f(d)},trainer:g,thumbnail:C,url_attachment:h||"",description:w||"",sections:d=="online"?$.map(s=>({id:s.id,name:s.name,subsections:s.sub_section.map(t=>({id:t.id,section_id:t.section_id,name:t.name,url:t.url,type:t.type,selectType:{value:t.type,label:f(t.type)},desc:t.desc||""}))})):[]}),T=()=>{r("sections",[...l.sections,{name:"",subsections:[{name:"",url:""}]}])},k=s=>{const t=l.sections.filter((i,a)=>a!==s);r("sections",t)},P=s=>{const t=[...l.sections];t[s].subsections.push({name:"",url:""}),r("sections",t)},D=(s,t)=>{const i=[...l.sections];i[s].subsections=i[s].subsections.filter((a,c)=>c!==t),r("sections",i)},R=s=>{s.preventDefault(),S(route("courses.update",p))};return e.jsxs("form",{onSubmit:R,className:"w-full",children:[e.jsxs("div",{className:"content-box",children:[e.jsx(E,{pageName:"Edit Course",prevPage:y}),e.jsx(m,{label:"Course Name",name:"name",error:o.name,isPrimary:!0,children:e.jsx(u,{name:"name",className:"mt-1 block w-full",value:l.name,onChange:s=>r("name",s.target.value),required:!0,isFocused:!0,autoComplete:"name",placeholder:"Name..."})}),e.jsx(m,{label:"Course Type",name:"type",error:o.type,isPrimary:!0,children:e.jsx(b,{name:"type",placeholder:"Select Type...",options:[{value:"offline",label:"Offline"},{value:"online",label:"Online"}],value:l.type,onChange:s=>r("type",s),className:"mt-1 block w-full",required:!0})}),e.jsx(m,{label:"Trainer Name",name:"trainer",error:o.trainer,isPrimary:!0,children:e.jsx(u,{name:"trainer",className:"mt-1 block w-full",value:l.trainer,required:!0,onChange:s=>r("trainer",s.target.value),autoComplete:"trainer",placeholder:"Trainer..."})}),e.jsx(m,{label:"Course Intro",name:"thumbnail",error:o.thumbnail,children:e.jsx(u,{type:"url",name:"thumbnail",className:"mt-1 block w-full",value:l.thumbnail,onChange:s=>r("thumbnail",s.target.value),autoComplete:"thumbnail",placeholder:"URL Video..."})}),e.jsx(m,{label:"Attachment",name:"url_attachment",error:o.url_attachment,children:e.jsx(u,{type:"url",name:"url_attachment",className:"mt-1 block w-full",value:l.url_attachment,onChange:s=>r("url_attachment",s.target.value),autoComplete:"url_attachment",placeholder:"URL Attachment..."})}),e.jsx(m,{label:"Description",name:"description",error:o.description,children:e.jsx(j,{id:"description",className:"mt-1 block w-full",value:l.description,onChange:s=>r("description",s.target.value),autoComplete:"description",placeholder:"Description",rows:3})})]}),l.type.value=="online"&&e.jsx("div",{className:"content-box mt-2",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text--sub-heading",children:"Section"}),e.jsx("button",{className:"btn btn--primary",type:"button",onClick:T,children:e.jsx(x,{})})]})}),l.type.value=="online"&&l.sections.map((s,t)=>e.jsxs("div",{className:"content-box mt-2",children:[e.jsx(m,{label:"Section Name",name:`sections.${t}.name`,error:o[`sections.${t}.name`],children:e.jsxs("div",{className:"flex flex-row items-end gap-x-2",children:[e.jsx(u,{name:`sections.${t}.name`,className:"flex-1 mt-1",value:s.name,onChange:i=>{const a=[...l.sections];a[t].name=i.target.value,r("sections",a)},placeholder:"Section Name..."}),e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>k(t),children:e.jsx(v,{})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between mt-5 mb-3",children:[e.jsx("h2",{className:"text--sub-heading",children:"Sub Section"}),e.jsx("button",{className:"btn-sm btn--primary",type:"button",onClick:()=>P(t),children:e.jsx(x,{size:18})})]}),s.subsections.map((i,a)=>e.jsxs("div",{className:"flex flex-row items-start gap-2 mt-2",children:[e.jsx("button",{className:"btn btn--danger",type:"button",onClick:()=>D(t,a),children:e.jsx(v,{})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{name:`sections.${t}.subsections.${a}.name`,className:"w-full",value:i.name,onChange:c=>{const n=[...l.sections];n[t].subsections[a].name=c.target.value,r("sections",n)},placeholder:"Name..."}),e.jsx(F,{message:o[`sections.${t}.subsections.${a}.name`],className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{error:o[`sections.${t}.subsections.${a}.type`],children:e.jsx(b,{name:`sections.${t}.subsections.${a}.type`,className:"flex-1",value:i.selectType,options:[{value:"media",label:"Media"},{value:"file",label:"File"}],onChange:c=>{const n=[...l.sections];n[t].subsections[a].type=c.value,n[t].subsections[a].selectType=c,r("sections",n)},placeholder:"Select Type...",required:!0})}),e.jsx("div",{className:"flex-1",children:e.jsx(m,{error:o[`sections.${t}.subsections.${a}.url`],isPrimary:!0,children:e.jsx(u,{type:"url",name:`sections.${t}.subsections.${a}.url`,className:"w-full",value:i.url,onChange:c=>{const n=[...l.sections];n[t].subsections[a].url=c.target.value,r("sections",n)},autoComplete:"url_sub_section",placeholder:"URL...",required:!0})})})]}),e.jsx("div",{className:"mb-3",children:e.jsx(m,{error:o[`sections.${t}.subsections.${a}.desc`],children:e.jsx(j,{id:"description",className:"mt-1 block w-full",value:i.desc,onChange:c=>{const n=[...l.sections];n[t].subsections[a].desc=c.target.value,r("sections",n)},autoComplete:"description",placeholder:"Description...",rows:3})})})]})]},a))]},t)),e.jsx("div",{className:"content-box mt-2 text-center",children:e.jsx(L,{className:"w-full justify-center",disabled:_,children:"Submit"})})]})};B.layout=p=>e.jsx(A,{title:"Course Edit",children:p});export{B as default};
